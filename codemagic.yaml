workflows:
  android_build:
    name: Android Build & Test
    max_build_duration: 60 # minutes
    environment:
      android:
        # Using the latest Codemagic Android image with required SDKs
        image: codemagic/android:latest
    scripts:
      # Clean the project
      - echo "Cleaning the project..."
      - ./gradlew clean
      
      # Run unit tests (if you have any tests)
      - echo "Running unit tests..."
      - ./gradlew test
      
      # Build the release version of the app
      - echo "Building the release APK..."
      - ./gradlew assembleRelease

    artifacts:
      # Collect the APK and/or AAB files from the outputs folder
      - app/build/outputs/**/*.apk
      - app/build/outputs/**/*.aab
